(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{200:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"安装-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker"}},[t._v("#")]),t._v(" 安装 Docker")]),t._v(" "),s("h2",{attrs:{id:"平台支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#平台支持"}},[t._v("#")]),t._v(" 平台支持")]),t._v(" "),s("p",[t._v("Docker CE 支持多种平台，如下表所示")]),t._v(" "),s("h3",{attrs:{id:"桌面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#桌面"}},[t._v("#")]),t._v(" 桌面")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("平台")]),t._v(" "),s("th",[t._v("架构")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("a",{attrs:{href:"https://docs.docker.com/docker-for-mac/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Desktop for Mac (macOS)"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("X64")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://docs.docker.com/docker-for-windows/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Desktop for Windows (Microsoft Windows 10)"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("X64")])])])]),t._v(" "),s("h3",{attrs:{id:"服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务器"}},[t._v("#")]),t._v(" 服务器")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("平台")]),t._v(" "),s("th",[t._v("x86_64 / amd64")]),t._v(" "),s("th",[t._v("ARM")]),t._v(" "),s("th",[t._v("ARM64 / AARCH64")]),t._v(" "),s("th",[t._v("IBM Power (ppc64le)")]),t._v(" "),s("th",[t._v("IBM Z (s390x)")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/centos/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CentOS"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("✔")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("✔")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/debian/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Debian"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("✔")]),t._v(" "),s("td",[t._v("✔")]),t._v(" "),s("td",[t._v("✔")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/fedora/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fedora"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("✔")]),t._v(" "),s("td"),t._v(" "),s("td",[t._v("✔")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ubuntu"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("✔")]),t._v(" "),s("td",[t._v("✔")]),t._v(" "),s("td",[t._v("✔")]),t._v(" "),s("td",[t._v("✔")]),t._v(" "),s("td",[t._v("✔")])])])]),t._v(" "),s("h2",{attrs:{id:"准备安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备安装"}},[t._v("#")]),t._v(" 准备安装")]),t._v(" "),s("h3",{attrs:{id:"卸载旧版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#卸载旧版本"}},[t._v("#")]),t._v(" 卸载旧版本")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" remove docker docker-engine docker.io containerd runc\n")])])]),s("h3",{attrs:{id:"使用-apt-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-apt-安装"}},[t._v("#")]),t._v(" 使用 APT 安装")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更新数据源")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" update\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装所需依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" -y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" apt-transport-https ca-certificates "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" software-properties-common\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 GPG 证书")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" apt-key "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 新增数据源")]),t._v("\nadd-apt-repository "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu '),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("lsb_release -cs"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(' stable"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更新并安装 Docker CE")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" update "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y docker-ce\n")])])]),s("h3",{attrs:{id:"验证安装是否成功"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证安装是否成功"}},[t._v("#")]),t._v(" 验证安装是否成功")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("docker version\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出如下")]),t._v("\nClient:\n Version:           "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.09")]),t._v(".6\n API version:       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.39")]),t._v("\n Go version:        go1.10.8\n Git commit:        481bc77\n Built:             Sat May  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" 02:35:57 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("\n OS/Arch:           linux/amd64\n Experimental:      "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n\nServer: Docker Engine - Community\n Engine:\n  Version:          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.09")]),t._v(".6\n  API version:      "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.39")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("minimum version "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.12")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  Go version:       go1.10.8\n  Git commit:       481bc77\n  Built:            Sat May  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" 01:59:36 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("\n  OS/Arch:          linux/amd64\n  Experimental:     "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n")])])]),s("h2",{attrs:{id:"配置-docker-镜像加速器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-docker-镜像加速器"}},[t._v("#")]),t._v(" 配置 Docker 镜像加速器")]),t._v(" "),s("h3",{attrs:{id:"阿里云加速器（推荐）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#阿里云加速器（推荐）"}},[t._v("#")]),t._v(" 阿里云加速器（推荐）")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://promotion.aliyun.com/ntms/act/qwbk.html?userCode=hgqku7c5",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击链接获取"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"官方提供中国区镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#官方提供中国区镜像"}},[t._v("#")]),t._v(" 官方提供中国区镜像")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("https://registry.docker-cn.com\n")])])]),s("h3",{attrs:{id:"配置加速器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置加速器"}},[t._v("#")]),t._v(" 配置加速器")]),t._v(" "),s("p",[t._v("以配置阿里云加速器为例，首先 "),s("a",{attrs:{href:"https://promotion.aliyun.com/ntms/act/qwbk.html?userCode=hgqku7c5",target:"_blank",rel:"noopener noreferrer"}},[t._v("登录阿里云（没有账号请先注册）"),s("OutboundLink")],1),t._v("，搜索 "),s("strong",[t._v("容器镜像服务")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/Lusifer_20190616094532.png",alt:""}})]),t._v(" "),s("p",[t._v("找到你的专属加速器")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/Lusifer_20190616094722.png",alt:""}})]),t._v(" "),s("p",[t._v("通过修改 daemon 配置文件 "),s("code",[t._v("/etc/docker/daemon.json")]),t._v(" 来使用加速器")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tee")]),t._v(" /etc/docker/daemon.json "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<-")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'EOF\'\n{\n  "registry-mirrors": ["https://xxxxxxxx.mirror.aliyuncs.com"]\n}\nEOF')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启 Docker")]),t._v("\nsystemctl daemon-reload\nsystemctl restart docker\n")])])]),s("h3",{attrs:{id:"验证配置是否成功"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证配置是否成功"}},[t._v("#")]),t._v(" 验证配置是否成功")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("docker info\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出如下")]),t._v("\nContainers: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("38")]),t._v("\n Running: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\n Paused: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n Stopped: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\nImages: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\nServer Version: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.09")]),t._v(".6\nStorage Driver: overlay2\n Backing Filesystem: extfs\n Supports d_type: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n Native Overlay Diff: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v("\n Network: bridge "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),t._v(" macvlan null overlay\n Log: awslogs fluentd gcplogs gelf journald json-file "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v(" logentries splunk syslog\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nInit Binary: docker-init\ncontainerd version: bb71b10fd8f58240ca47fbb579b9d1028eea7c84\nrunc version: 2b18fe1d885ee5083ef9f0838fee39b62d653e30\ninit version: fec3683\nSecurity Options:\n apparmor\n seccomp\n  Profile: default\nKernel Version: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.15")]),t._v(".0-51-generic\nOperating System: Ubuntu "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.04")]),t._v(".2 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\nTotal Memory: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".924GiB\nName: kubernetes-master\nID: PJ4H:7AF2:P5UT:6FMR:W4DI:SSWR:IQQR:J6QO:ARES:BOAC:ZVMO:SV2Y\nDocker Root Dir: /var/lib/docker\nDebug Mode "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nDebug Mode "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nRegistry: https://index.docker.io/v1/\nLabels:\nExperimental: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nInsecure Registries:\n "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.0/8\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 这里是你配置的镜像加速器")]),t._v("\nRegistry Mirrors:\n https://xxxxxxxx.mirror.aliyuncs.com/\nLive Restore Enabled: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nProduct License: Community Engine\n\nWARNING: No swap limit support\n")])])]),s("h2",{attrs:{id:"运行第一个容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行第一个容器"}},[t._v("#")]),t._v(" 运行第一个容器")]),t._v(" "),s("p",[t._v("我们以 Nginx 为例，体验 Docker 是如何运行容器的")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载镜像")]),t._v("\ndocker pull nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行容器")]),t._v("\ndocker run --name nginx-container -p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(":80 -d nginx\n")])])]),s("p",[t._v("浏览器输入虚拟机地址即可访问 Nginx")]),t._v(" "),s("p",[s("img",{attrs:{src:"/assets/Lusifer_20190616095948.png",alt:""}})])])}),[],!1,null,null,null);e.default=n.exports}}]);